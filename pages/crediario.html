<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil e Crediário - Sistema Vestio</title>
    <link rel="stylesheet" href="../css/globais.css">
    <script type="module" src="../js/auth-guard.js"></script>

    <style>
        .card-info-cliente { background: linear-gradient(135deg, #2c3e50, #3498db); color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .card-info-cliente h2 { margin: 0 0 10px 0; }
        .info-grid { display: flex; gap: 30px; font-size: 16px; }
        
        .container-duplo { display: flex; gap: 20px; }
        .coluna { flex: 1; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; font-size: 14px; }
        th { background-color: #ecf0f1; color: #2c3e50; }
        
        .badge { padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; color: white; }
        .bg-pendente { background-color: #f39c12; }
        .bg-pago { background-color: #27ae60; }
        
        .btn-pequeno { border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; color: white; font-weight: bold; }
        .btn-gerar { background-color: #3498db; }
        .btn-baixa { background-color: #27ae60; }
    </style>
</head>
<body style="margin: 0;">

    <header style="background-color: #2c3e50; color: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;">
        <h1 style="margin: 0; font-size: 1.5rem;">Sistema Vestio - Gestão de Crediário</h1>
        <button id="btn-voltar" style="background-color: #e74c3c; color: white; padding: 8px 15px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; font-size: 14px;">⬅️ Voltar aos Clientes</button>
    </header>

    <main style="padding: 30px; max-width: 1200px; margin: 0 auto;">
        
        <div class="card-info-cliente" id="info-cliente-container" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
            
            <div>
                <h2 id="nome-cliente-display">Carregando...</h2>
                <div class="info-grid" style="margin-bottom: 10px;">
                    <div><strong>CPF:</strong> <span id="cpf-cliente-display">-</span></div>
                    <div><strong>Telefone:</strong> <span id="telefone-cliente-display">-</span></div>
                    <div><strong>Endereço:</strong> <span id="endereco-cliente-display">-</span></div>
                </div>
                <div style="font-size: 18px; background: rgba(0,0,0,0.2); display: inline-block; padding: 5px 15px; border-radius: 4px;">
                    <strong>Limite Total:</strong> <span id="limite-cliente-display">R$ 0,00</span>
                </div>
            </div>

            <div style="background: rgba(255,255,255,0.1); padding: 15px 25px; border-radius: 8px; text-align: center; border: 1px solid rgba(255,255,255,0.3); min-width: 250px;">
                <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #ecf0f1; text-transform: uppercase; letter-spacing: 1px;">Análise de Crédito</h3>
                <div id="score-cliente" style="font-size: 26px; font-weight: bold; margin-bottom: 5px; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">-</div>
                <div id="estatisticas-cliente" style="font-size: 13px; color: #ecf0f1;">Calculando histórico...</div>
            </div>

        </div>

        <div class="container-duplo">
            
            <div class="coluna">
                <h3 style="margin-top: 0; color: #2c3e50;">Compras Pendentes de Parcelamento</h3>
                <p style="font-size: 13px; color: #7f8c8d;">Vendas realizadas no PDV aguardando geração do carnê.</p>
                <table>
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Ação</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-vendas-pendentes">
                        </tbody>
                </table>
            </div>

            <div class="coluna">
                <h3 style="margin-top: 0; color: #2c3e50;">Carnê / Parcelas</h3>
                <p style="font-size: 13px; color: #7f8c8d;">Controle de pagamentos mensais deste cliente.</p>
                <table>
                    <thead>
                        <tr>
                            <th>Vencimento / Pagto</th>
                            <th>Valor</th>
                            <th>Status</th>
                            <th>Ação</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-parcelas">
                        </tbody>
                </table>
            </div>

        </div>
    </main>

    <script type="module" src="../js/crediario.js"></script>
</body>
</html>