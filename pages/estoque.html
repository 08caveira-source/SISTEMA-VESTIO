<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estoque - Sistema Vestio</title>
    <link rel="stylesheet" href="../css/globais.css">
    
    <script type="module" src="../js/auth-guard.js"></script>

    <style>
        /* Estilos espec√≠ficos para esta tela */
        .container-estoque { display: flex; gap: 20px; }
        .card-form { background: white; padding: 20px; border-radius: 8px; flex: 1; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .card-lista { background: white; padding: 20px; border-radius: 8px; flex: 2; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .grade-box { border: 1px dashed #ccc; padding: 15px; border-radius: 8px; margin-top: 15px; background-color: #f9f9f9; }
        .lista-variantes { list-style: none; padding: 0; margin-top: 10px; }
        .lista-variantes li { background: #e8f4f8; padding: 8px; margin-bottom: 5px; border-radius: 4px; display: flex; justify-content: space-between; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #2c3e50; color: white; }
        /* Estilos do Modal (Janela Flutuante) */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Fundo escuro transparente */
            display: none; /* Escondido por padr√£o */
            justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-content {
            background: white; padding: 25px; border-radius: 8px;
            width: 90%; max-width: 500px; position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .close-btn {
            position: absolute; top: 10px; right: 15px; font-size: 24px;
            cursor: pointer; color: #7f8c8d; font-weight: bold;
        }
        .info-row {
            display: flex; justify-content: space-between; margin-bottom: 10px;
            border-bottom: 1px dashed #eee; padding-bottom: 5px;
        }
        .tag-preco-custo { color: #c0392b; font-weight: bold; }
        .tag-preco-venda { color: #27ae60; font-weight: bold; }
    </style>
</head>
<body style="margin: 0;">

    <header style="background-color: #2c3e50; color: white; padding: 15px 20px; display: flex; justify-content: space-between;">
        <h1 style="margin: 0; font-size: 1.5rem;">Sistema Vestio - Estoque</h1>
        <button id="btn-voltar" style="background-color: #34495e; color: white; padding: 5px 15px;">Voltar ao Painel</button>
    </header>

    <div style="display: flex; min-height: calc(100vh - 60px);">
        <nav class="menu-lateral">
            <div class="titulo-menu">Principal</div>
            <a href="dashboard.html" class="menu-link"><span class="menu-icone">üè†</span> In√≠cio</a>
            <a href="pdv.html" class="menu-link"><span class="menu-icone">üõí</span> PDV (Caixa)</a>
            <div class="titulo-menu" style="margin-top: 20px;">Gest√£o</div>
            <a href="#" class="menu-link ativo"><span class="menu-icone">üì¶</span> Estoque</a> <a href="clientes.html" class="menu-link"><span class="menu-icone">üë•</span> Clientes</a>
            <a href="relatorios.html" class="menu-link"><span class="menu-icone">üìä</span> Relat√≥rios</a>
            <div class="titulo-menu" style="margin-top: 20px;">Configura√ß√µes</div>
            <a href="usuarios.html" class="menu-link"><span class="menu-icone">üîê</span> Usu√°rios</a>
            <a href="minha-loja.html" class="menu-link"><span class="menu-icone">üè™</span> Minha Loja</a>
        </nav>

        <main style="flex: 1; padding: 30px;">
            <div class="container-estoque">
                
                <div class="card-form">
                    <h3>Cadastrar Novo Produto</h3>
                    <form id="form-produto">
                        <label>Nome da Pe√ßa / Modelo</label>
                        <input type="text" id="nome" required placeholder="Ex: Camiseta B√°sica Algod√£o">
                        
                        <div class="grid-2">
                            <div>
                                <label>Categoria</label>
                                <select id="categoria" required>
                                    <option value="">Selecione...</option>
                                    <option value="Camiseta">Camiseta</option>
                                    <option value="Cal√ßa">Cal√ßa</option>
                                    <option value="Vestido">Vestido</option>
                                    <option value="Casaco">Casaco</option>
                                    <option value="Acess√≥rio">Acess√≥rio</option>
                                </select>
                            </div>
                            <div>
                                <label>Marca</label>
                                <input type="text" id="marca" required placeholder="Ex: Nike, Pr√≥pria">
                            </div>
                        </div>

                        <div class="grid-2">
                            <div>
                                <label>Pre√ßo de Custo (R$)</label>
                                <input type="number" step="0.01" id="precoCusto" required>
                            </div>
                            <div>
                                <label>Pre√ßo de Venda (R$)</label>
                                <input type="number" step="0.01" id="precoVenda" required>
                            </div>
                        </div>

                        <div class="grade-box">
                            <h4>Grade e Quantidade</h4>
                            <div class="grid-2">
                                <div>
                                    <label>Tamanho</label>
                                    <select id="var-tamanho">
                                        <option value="√önico">√önico</option>
                                        <option value="PP">PP</option>
                                        <option value="P">P</option>
                                        <option value="M">M</option>
                                        <option value="G">G</option>
                                        <option value="GG">GG</option>
                                        <option value="X1">X1</option>
                                    </select>
                                </div>
                                <div>
                                    <label>Cor</label>
                                    <input type="text" id="var-cor" placeholder="Ex: Preta">
                                </div>
                            </div>
                            <label>Quantidade</label>
                            <input type="number" id="var-qtd" min="1" value="1">
                            <button type="button" id="btn-add-variante" style="width: 100%; margin-top: 10px; background-color: #3498db; color: white; padding: 8px;">+ Adicionar √† Grade</button>
                            
                            <ul id="lista-variantes" class="lista-variantes"></ul>
                        </div>

                        <button type="submit" style="width: 100%; margin-top: 20px; background-color: #27ae60; color: white; padding: 12px;">Salvar Produto no Estoque</button>
                    </form>
                </div>

                <div class="card-lista">
                    <h3>Produtos em Estoque</h3>
                    
                    <input type="text" id="filtro-busca" placeholder="Buscar produto..." style="width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;">

                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th>Produto</th>
                                <th>Categoria</th>
                                <th>Pre√ßo Venda</th>
                                <th>Estoque</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="tabela-produtos"></tbody>
                    </table>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee;">
                        <button id="btn-ant" style="padding: 8px 15px; cursor: pointer; background: #ecf0f1; border: none; border-radius: 4px;">‚ùÆ Anterior</button>
                        <span id="info-paginacao" style="font-size: 14px; color: #7f8c8d;">P√°gina 1 de 1</span>
                        <button id="btn-prox" style="padding: 8px 15px; cursor: pointer; background: #ecf0f1; border: none; border-radius: 4px;">Pr√≥ximo ‚ùØ</button>
                    </div>
                </div>
        </main>
    </div>

        <div id="modal-visualizar" class="modal-overlay">
            <div class="modal-content">
                <span class="close-btn" onclick="fecharModal()">&times;</span>
            
                <h2 id="view-nome" style="margin-top: 0; color: #2c3e50;">Nome do Produto</h2>
                <p style="color: #7f8c8d; margin-top: -10px;" id="view-marca">Marca</p>
            
                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin: 15px 0;">
                    <div class="info-row">
                        <span>Categoria:</span>
                        <strong id="view-categoria">-</strong>
                    </div>
                    <div class="info-row">
                        <span>Pre√ßo de Custo:</span>
                        <strong id="view-custo" class="tag-preco-custo">R$ 0,00</strong>
                    </div>
                    <div class="info-row" style="border-bottom: none;">
                        <span>Pre√ßo de Venda:</span>
                        <strong id="view-venda" class="tag-preco-venda">R$ 0,00</strong>
                    </div>
                </div>

                <h4 style="margin-bottom: 10px; border-bottom: 2px solid #3498db; display: inline-block;">Grade em Estoque</h4>
                <ul id="view-grade" style="list-style: none; padding: 0; margin: 0; max-height: 150px; overflow-y: auto;">
                    </ul>

                <div style="margin-top: 20px; text-align: right;">
                    <small style="color: #95a5a6;">Total de Pe√ßas: <b id="view-total">0</b></small>
                </div>
            </div>
        </div>

    <script type="module" src="../js/estoque.js"></script>
</body>
</html>